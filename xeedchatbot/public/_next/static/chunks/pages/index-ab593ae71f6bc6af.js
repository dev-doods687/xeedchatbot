(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(8170)}])},8170:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(5893),r=s(8549),n=s(5314),l=s(2956),c=s(8358),o=s(7294),i=s(9342),u=s(1254),d=s(8228);let h=async(e,t,s)=>{let a=await fetch(e),r=await a.blob();return new File([r],t,{type:s})};var m=s(8379),x=s.n(m);function C(e){let{jsonStr:t,addJsonStr:s,addChat:a,chatGptSessionId:n,temporaryResponse:m,clearTemporaryResponse:C,toggleLoading:f,setAllowWS:g}=(0,o.useContext)(l.p),{updateFeedback:p}=(0,o.useContext)(u.l),{token:w}=(0,o.useContext)(r.E_),{ipAddress:b}=(0,o.useContext)(c.S),[j,k]=(0,o.useState)(),[v,y]=(0,o.useState)(),{mutate:N,data:S,error:_}=(0,d.D)({mutationFn:i.WJ}),{mutate:L,data:E,error:M,status:T}=(0,d.D)({mutationFn:i.hW}),{mutate:F,data:H,error:I}=(0,d.D)({mutationFn:i.V1}),{mutate:D,data:A,error:V}=(0,d.D)({mutationFn:i.fA}),{mutate:R,data:Z,error:B}=(0,d.D)({mutationFn:i.Es}),O=(0,o.useCallback)(s=>{let{message:r,audio:n}=s;if(b){let s=Math.random().toString();a({chatId:s,isSuccess:!0,audio:n,message:r,ownChat:!0}),k(s),f(!0),N({msg:r,audio:n,jsonStr:t,ipAddress:b,token:w}),null==e||e()}else p({showSnackbar:!0,snackbarMessage:"Cannot send chat without your IP Address",snackbarType:"error"})},[b,a,f,N,t,e,p,w]),P=(0,o.useCallback)(s=>{let r=Math.random().toString();g(!0),a({chatId:r,isSuccess:!0,message:s,ownChat:!0}),k(r),f(!0),L({msg:s,jsonStr:t,gpt_session:n,token:w}),null==e||e()},[a,f,L,t,n,e,w]),q=(0,o.useCallback)((e,t)=>{D({messageId:e,isLike:t})},[D]);return(0,o.useEffect)(()=>{let t=async t=>{s(t.message.at(-1).map(e=>'"'.concat(e,'"')).join(",").replace(/\n/g,""));try{C(),a({chatId:Math.random().toString(),isSuccess:!0,message:t.message.at(-1)[1],ownChat:!1})}catch(e){""!==m&&(a({chatId:Math.random().toString(),isSuccess:!0,message:m,ownChat:!1}),C()),e instanceof Error&&p({showSnackbar:!0,snackbarMessage:e.message,snackbarType:"error"})}finally{f(!1),null==e||e()}};E?t(E):M&&(M instanceof Error&&p({showSnackbar:!0,snackbarMessage:M.message,snackbarType:"error"}),f(!1),null==e||e())},[E,M]),(0,o.useEffect)(()=>{let t;let r=async t=>{let r;s(t.message.at(-1).map(e=>'"'.concat(e,'"')).join(",").replace(/\n/g,""));let n=t.audioUrl;try{if(n){r=await h(n,x()(),"audio/wav; codecs=0");let e=n.split("/").at(-1);e&&F({fileName:e,token:w})}a({chatId:Math.random().toString(),isSuccess:!0,audio:r,message:t.message.at(-1)[1],ownChat:!1})}catch(e){e instanceof Error&&p({showSnackbar:!0,snackbarMessage:e.message,snackbarType:"error"})}finally{f(!1),null==e||e()}};return S?S.message.includes("generating answer")?t=setTimeout(()=>{R({transactionId:v,token:w})},1e3):r(S):B&&(_ instanceof Error&&p({showSnackbar:!0,snackbarMessage:_.message,snackbarType:"error"}),f(!1),null==e||e()),()=>clearTimeout(t)},[S,_]),(0,o.useEffect)(()=>{let t;let r=async t=>{let r;s(t.message.at(-1).map(e=>'"'.concat(e,'"')).join(",").replace(/\n/g,""));let n=t.audioUrl,l=new Audio(n);l.play();try{if(n){r=await h(n,x()(),"audio/wav; codecs=0");let e=n.split("/").at(-1);e&&F({fileName:e,token:w})}a({chatId:Math.random().toString(),isSuccess:!0,audio:r,message:t.message.at(-1)[1],ownChat:!1})}catch(e){e instanceof Error&&p({showSnackbar:!0,snackbarMessage:e.message,snackbarType:"error"})}finally{f(!1),null==e||e()}};return Z?Z.message.includes("generating answer")?t=setTimeout(()=>{R({transactionId:v,token:w})},1e3):r(Z):B&&(_ instanceof Error&&p({showSnackbar:!0,snackbarMessage:_.message,snackbarType:"error"}),f(!1),null==e||e()),()=>clearTimeout(t)},[Z,B,_]),(0,o.useEffect)(()=>{A?p({showSnackbar:!0,snackbarMessage:"Feedback sent",snackbarType:"success"}):V&&p({showSnackbar:!0,snackbarMessage:"Failed to send feedback",snackbarType:"error"})},[A,V,p]),(0,o.useEffect)(()=>{var e;(null==H?void 0:null===(e=H.message)||void 0===e?void 0:e.includes("RequestError"))||I?p({showSnackbar:!0,snackbarMessage:"Failed to delete audio file on server",snackbarType:"error"}):H&&console.log("Server audio file deleted.")},[H,I,p]),{sendHandler:O,sendRTHandler:P,feedbackHandler:q}}let f=/(https?|ftp):\/\/[^\s/$.?#].[^\s<]*/g;var g=(0,o.memo)(e=>{let{text:t,duration:s,disableTyping:r,className:n,onFinish:l,onType:c}=e,[i,u]=(0,o.useState)(""),d=(0,o.useCallback)(e=>{let t=e.replaceAll("\n","<br/>").replaceAll(f,e=>"<a key='".concat(x()(),"' href='").concat(e,'\' target="_blank" className="break-all" rel="noopener noreferrer">\n               ').concat(e,"\n             </a>"));return t},[]);return((0,o.useEffect)(()=>{let e;if(!r)return i.length<t.length?e=setTimeout(()=>{null==c||c(),u(t.slice(0,i.length+1))},null!=s?s:20):i.length===t.length&&(null==l||l()),()=>clearTimeout(e)},[s,r,i,t]),r)?(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:d(t)},className:"font-Roboto"}):i!==t?(0,a.jsxs)("p",{className:n,children:[i,(0,a.jsx)("span",{children:"█"})]}):(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:d(i)},className:"font-Roboto"})}),p=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,a.jsx)("g",{clipPath:"url(#clip0_74_1344)",children:(0,a.jsx)("path",{d:"M6.956 14.534C7.021 15.47 7.908 16.193 8.864 15.954L9.125 15.889C9.36444 15.8331 9.58455 15.7141 9.7625 15.5444C9.94045 15.3747 10.0698 15.1605 10.137 14.924C10.357 14.108 10.67 12.412 10.199 10.414C10.335 10.434 10.484 10.451 10.642 10.465C11.355 10.53 12.311 10.536 13.158 10.254C13.676 10.081 14.152 9.574 14.358 8.982C14.4611 8.69543 14.4937 8.38822 14.453 8.08639C14.4123 7.78456 14.2994 7.49698 14.124 7.248C14.182 7.13 14.227 7.006 14.262 6.886C14.339 6.616 14.375 6.318 14.375 6.03C14.375 5.74 14.339 5.444 14.262 5.173C14.2228 5.03349 14.1691 4.89843 14.102 4.77C14.271 4.383 14.209 3.95 14.099 3.621C13.9863 3.29648 13.8215 2.9925 13.611 2.721C13.665 2.568 13.687 2.408 13.687 2.256C13.6827 1.93527 13.5956 1.6211 13.434 1.344C13.1 0.756999 12.437 0.279999 11.5 0.279999H8C7.395 0.279999 6.93 0.359999 6.534 0.496999C6.19346 0.621684 5.86807 0.784379 5.564 0.981999L5.516 1.011C5.012 1.319 4.517 1.621 3.448 1.734C2.682 1.815 2 2.434 2 3.279V7.279C2 8.13 2.685 8.712 3.357 8.895C4.206 9.127 4.931 9.682 5.489 10.305C6.049 10.931 6.403 11.585 6.528 11.943C6.727 12.518 6.884 13.483 6.956 14.534V14.534Z",fill:"inherit"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_74_1344",children:(0,a.jsx)("rect",{width:"16",height:"16",fill:"inherit"})})})]})},w=e=>{let{className:t}=e;return(0,a.jsx)("svg",{viewBox:"0 0 19 10",xmlns:"http://www.w3.org/2000/svg",className:t,children:(0,a.jsx)("path",{d:"M10.455 0.455003C10.6663 0.253837 10.9475 0.142624 11.2392 0.144831C11.531 0.147039 11.8104 0.262494 12.0187 0.466835C12.2269 0.671176 12.3476 0.94842 12.3553 1.24006C12.363 1.53171 12.2571 1.81494 12.06 2.03L6.07499 9.515C5.97208 9.62585 5.84787 9.71481 5.70979 9.77655C5.57171 9.8383 5.4226 9.87157 5.27137 9.87437C5.12014 9.87717 4.9699 9.84944 4.82963 9.79285C4.68936 9.73626 4.56194 9.65196 4.45499 9.545L0.485992 5.576C0.375462 5.47301 0.286808 5.34881 0.225321 5.21081C0.163833 5.07281 0.13077 4.92384 0.128105 4.77279C0.12544 4.62173 0.153227 4.47169 0.209808 4.33161C0.26639 4.19152 0.350607 4.06427 0.457435 3.95745C0.564263 3.85062 0.691513 3.7664 0.831596 3.70982C0.971678 3.65324 1.12172 3.62545 1.27278 3.62812C1.42383 3.63078 1.5728 3.66384 1.7108 3.72533C1.8488 3.78682 1.973 3.87547 2.07599 3.986L5.21699 7.1255L10.425 0.488004C10.4343 0.476423 10.4444 0.465403 10.455 0.455003ZM9.07499 8.165L10.455 9.545C10.5619 9.65173 10.6892 9.73583 10.8294 9.79228C10.9695 9.84874 11.1196 9.87639 11.2706 9.87359C11.4217 9.87079 11.5706 9.8376 11.7085 9.77599C11.8465 9.71438 11.9706 9.62562 12.0735 9.515L18.0615 2.03C18.1691 1.92381 18.2541 1.79702 18.3116 1.65722C18.3691 1.51741 18.3978 1.36746 18.396 1.21631C18.3943 1.06517 18.3621 0.915925 18.3013 0.777501C18.2406 0.639076 18.1526 0.514308 18.0426 0.410647C17.9326 0.306987 17.8028 0.226559 17.661 0.174167C17.5192 0.121776 17.3684 0.0984951 17.2174 0.105715C17.0664 0.112936 16.9184 0.150509 16.7823 0.216192C16.6461 0.281874 16.5246 0.374318 16.425 0.488004L11.2155 7.1255L10.488 6.3965L9.07349 8.165H9.07499Z",fill:"inherit"})})},b=e=>{let{className:t}=e;return(0,a.jsx)("svg",{viewBox:"0 0 13 18",xmlns:"http://www.w3.org/2000/svg",className:t,children:(0,a.jsx)("path",{d:"M4.956 1.745C5.021 0.810002 5.908 0.0870021 6.864 0.325002L7.125 0.391002C7.588 0.507002 7.999 0.847002 8.137 1.356C8.357 2.172 8.67 3.867 8.199 5.866C8.34626 5.84566 8.49397 5.82865 8.642 5.815C9.355 5.75 10.311 5.743 11.158 6.025C11.676 6.198 12.152 6.706 12.358 7.298C12.542 7.83 12.518 8.46 12.124 9.031C12.182 9.15 12.227 9.273 12.262 9.394C12.339 9.664 12.375 9.961 12.375 10.25C12.375 10.539 12.339 10.836 12.262 11.106C12.223 11.241 12.172 11.379 12.102 11.51C12.271 11.897 12.209 12.329 12.099 12.658C11.9864 12.9829 11.8216 13.2872 11.611 13.559C11.665 13.711 11.687 13.871 11.687 14.024C11.687 14.329 11.598 14.649 11.434 14.936C11.1 15.522 10.437 16 9.5 16H6C5.395 16 4.93 15.919 4.534 15.782C4.1935 15.6577 3.8681 15.4953 3.564 15.298L3.516 15.268C3.012 14.961 2.517 14.659 1.448 14.546C0.682 14.464 0 13.846 0 13V9C0 8.15 0.685 7.568 1.357 7.385C2.206 7.153 2.931 6.598 3.489 5.975C4.049 5.348 4.403 4.695 4.528 4.336C4.727 3.761 4.884 2.797 4.956 1.746V1.745Z",fill:"inherit"})})};let j=e=>e.startsWith("http")?e:"".concat(window.location.origin).concat(e);var k=s(5675),v=s.n(k),y=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"200px",height:"200px",viewBox:"0 0 100 100",className:t,children:[(0,a.jsx)("g",{transform:"translate(25 50)",children:(0,a.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8c8c8c",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.3333333333333333s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})})}),(0,a.jsx)("g",{transform:"translate(50 50)",children:(0,a.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8c8c8c",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"-0.16666666666666666s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})})}),(0,a.jsx)("g",{transform:"translate(75 50)",children:(0,a.jsx)("circle",{cx:"0",cy:"0",r:"6",fill:"#8c8c8c",children:(0,a.jsx)("animateTransform",{attributeName:"transform",type:"scale",begin:"0s",calcMode:"spline",keySplines:"0.3 0 0.7 1;0.3 0 0.7 1",values:"0;1;0",keyTimes:"0;0.5;1",dur:"1s",repeatCount:"indefinite"})})})]})},N=e=>{var t;let{chatItem:s,feedbackHandler:n,scrollDownHandler:l}=e,{userAvatarBgColor:c,businessAvatarBgColor:i,businessAvatarImgUrl:u}=(0,o.useContext)(r.E_);return(0,a.jsx)("div",{className:"".concat(s.ownChat?"bg-transparent":"bg-[#F3F9FE] dark:bg-gray-600"),children:(0,a.jsxs)("div",{className:"mx-auto flex w-full gap-4 py-6 max-sm:px-8 sm:w-[46.188rem] sm:gap-8",children:[(0,a.jsx)(v(),{src:s.ownChat?"".concat("/assets/xeedchatbot","/images/mock/profile.svg"):j(u),alt:s.ownChat?"Me":"ChatGPT",height:100,width:100,className:"h-8 w-8 rounded-full object-contain ".concat(s.ownChat?"p-2":"p-1"),style:{backgroundColor:s.ownChat?c:i}}),(s.message||s.audio)&&(0,a.jsxs)("div",{className:"flex grow flex-col items-start gap-2",children:[s.audio&&(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("audio",{src:URL.createObjectURL(s.audio),controls:!0,className:"h-8 w-1/2 md:w-2/5 lg:w-1/3"})}),s.message&&(0,a.jsx)(g,{disableTyping:"temp"===s.chatId||!s.ownChat,text:null!==(t=s.message)&&void 0!==t?t:"",duration:20,className:"w-full whitespace-pre-line font-Roboto text-[1rem] leading-8",onFinish:l})]}),!s.message&&!s.audio&&(0,a.jsx)(y,{className:"h-8 w-8 bg-transparent"}),""!==s.message&&(0,a.jsx)(a.Fragment,{children:s.ownChat?(0,a.jsx)("span",{className:"flex h-4 w-10 justify-end pt-2",children:(0,a.jsx)(w,{className:"h-4 w-4 fill-[#127ECD]"})}):(0,a.jsxs)("span",{className:"flex h-4 w-10 gap-2 pt-2",children:[(0,a.jsx)("button",{onClick:()=>null==n?void 0:n(s.chatId,!0),children:(0,a.jsx)(b,{className:"h-4 w-4 fill-transparent stroke-black/[0.45] hover:fill-[#004EA8] hover:stroke-transparent"})}),(0,a.jsx)("button",{onClick:()=>null==n?void 0:n(s.chatId,!1),children:(0,a.jsx)(p,{className:"h-[0.9rem] w-[0.9rem] fill-transparent stroke-black/[0.45] hover:fill-[#FF4D4F] hover:stroke-transparent"})})]})})]})})},S=()=>(0,a.jsx)(N,{chatItem:{chatId:Math.random().toString(),isSuccess:!1,message:"",ownChat:!1}});let _=(0,o.forwardRef)((e,t)=>{let{scrollDownHandler:s}=e,{chats:r,isLoading:n,temporaryResponse:c}=(0,o.useContext)(l.p),{feedbackHandler:i}=C();return(0,a.jsxs)("div",{className:"flex h-full w-full flex-col overflow-y-auto",ref:t,children:[r.map(e=>(0,a.jsx)(N,{chatItem:e,feedbackHandler:i,scrollDownHandler:s},e.chatId)),n&&""===c.trim()&&(0,a.jsx)(S,{}),""!==c.trim()&&(0,a.jsx)(N,{chatItem:{chatId:"temp",isSuccess:!1,ownChat:!1,message:"".concat(c,"█")}})]})});_.displayName="ChatList";var L=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:t,children:[(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"7.5",fill:"currentBackgroundColor"}),(0,a.jsx)("path",{d:"M6 6L9.99998 9.85797",stroke:"currentColor",strokeLinecap:"round"}),(0,a.jsx)("path",{d:"M9.86731 6L5.99995 10",stroke:"currentColor",strokeLinecap:"round"}),(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"7.5",stroke:"#FF4D4F"})]})},E=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",className:t,children:[(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"7.5",fill:"currentBackgroundColor"}),(0,a.jsx)("path",{d:"M10.0673 5.65941C10.171 5.55603 10.309 5.49888 10.4522 5.50002C10.5953 5.50115 10.7324 5.56048 10.8346 5.66549C10.9368 5.7705 10.996 5.91297 10.9998 6.06284C11.0036 6.21272 10.9516 6.35827 10.8549 6.46878L7.91814 10.3152C7.86764 10.3722 7.80669 10.4179 7.73894 10.4496C7.67119 10.4814 7.59802 10.4985 7.52381 10.4999C7.44961 10.5013 7.37589 10.4871 7.30706 10.458C7.23823 10.4289 7.17571 10.3856 7.12323 10.3306L5.1757 8.29103C5.12146 8.2381 5.07796 8.17427 5.04779 8.10336C5.01762 8.03244 5.00139 7.95589 5.00009 7.87826C4.99878 7.80064 5.01241 7.72353 5.04018 7.65155C5.06794 7.57956 5.10926 7.51417 5.16168 7.45927C5.2141 7.40437 5.27654 7.36109 5.34528 7.33202C5.41402 7.30294 5.48764 7.28866 5.56176 7.29003C5.63588 7.2914 5.70898 7.30839 5.77669 7.33999C5.84441 7.37159 5.90535 7.41715 5.95589 7.47395L7.49713 9.08729L10.0534 5.67637C10.058 5.67043 10.0621 5.66477 10.0673 5.65941Z",fill:"currentColor"}),(0,a.jsx)("rect",{x:"0.5",y:"0.5",width:"15",height:"15",rx:"7.5",stroke:"#52C41A"})]})},M=e=>{let{className:t}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,a.jsx)("rect",{width:"28",height:"28",rx:"14",fill:"inherit"}),(0,a.jsx)("path",{d:"M14 15.75C15.4672 15.75 16.6562 14.575 16.6562 13.125V9.625C16.6562 8.175 15.4672 7 14 7C12.5328 7 11.3438 8.175 11.3438 9.625V13.125C11.3438 14.575 12.5328 15.75 14 15.75ZM19.1562 13.0938C19.1562 13.025 19.1 12.9688 19.0312 12.9688H18.0938C18.025 12.9688 17.9688 13.025 17.9688 13.0938C17.9688 15.2859 16.1922 17.0625 14 17.0625C11.8078 17.0625 10.0312 15.2859 10.0312 13.0938C10.0312 13.025 9.975 12.9688 9.90625 12.9688H8.96875C8.9 12.9688 8.84375 13.025 8.84375 13.0938C8.84375 15.7297 10.8219 17.9047 13.375 18.2125V19.8125H11.1047C10.8906 19.8125 10.7188 20.0359 10.7188 20.3125V20.875C10.7188 20.9438 10.7625 21 10.8156 21H17.1844C17.2375 21 17.2812 20.9438 17.2812 20.875V20.3125C17.2812 20.0359 17.1094 19.8125 16.8953 19.8125H14.5625V18.2203C17.1453 17.9391 19.1562 15.7516 19.1562 13.0938Z",fill:"currentColor"})]})},T=e=>{let{className:t,style:s}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 15 16",fill:"none",style:s,className:t,children:[(0,a.jsx)("g",{clipPath:"url(#clip0_1_1318)",children:(0,a.jsx)("path",{d:"M14.847 7.7569L0.400114 0.0307151C0.341394 -0.000602297 0.274038 -0.00797104 0.210137 0.00860875C0.139216 0.0273104 0.0781317 0.0752259 0.0402594 0.141864C0.00238707 0.208502 -0.00918731 0.288432 0.00807067 0.364153L1.4968 6.85238C1.51925 6.95001 1.5866 7.02923 1.67641 7.06054L4.22728 7.99454L1.67814 8.92853C1.58833 8.96169 1.52098 9.03907 1.50025 9.1367L0.00807067 15.6341C-0.00747288 15.7023 -0.000564559 15.7741 0.0287955 15.8349C0.0961509 15.9805 0.261949 16.0394 0.400114 15.9676L14.847 8.28561C14.9005 8.25797 14.9437 8.21008 14.9713 8.15481C15.0387 8.00743 14.9834 7.83058 14.847 7.7569ZM1.71095 13.7883L2.57966 10.0007L7.67795 8.13455C7.71767 8.11981 7.75048 8.08665 7.7643 8.04244C7.78848 7.96506 7.75049 7.88217 7.67795 7.85453L2.57966 5.99023L1.71441 2.2174L12.5604 8.01849L1.71095 13.7883Z",fill:"black",fillOpacity:"0.25"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_1_1318",children:(0,a.jsx)("path",{d:"M0 0H13C14.1046 0 15 0.895431 15 2V14C15 15.1046 14.1046 16 13 16H0V0Z",fill:"white"})})})]})},F=e=>{let{className:t,...s}=e;return(0,a.jsx)("input",{...s,className:"w-full bg-transparent focus:border-none focus:outline-none focus:ring-0 ".concat(t)})},H=s(381);let I=/(https?|ftp):\/\/[^\s/$.?#].[^\s<]*/g;var D=e=>{let{submitHandler:t}=e,{inputMode:s}=(0,o.useContext)(c.S),{footerImgUrl:l,footerLink:i,footerText:u,borderColor:d}=(0,o.useContext)(r.E_),{recordingStatus:h,recordingDuration:m,startRecording:C,stopRecording:f,resetRecording:g}=(0,o.useContext)(n.H),p=(0,o.useRef)(null),w=(0,o.useCallback)(e=>{let t=e.replaceAll("\n","<br/>").replaceAll(I,e=>"<a key='".concat(x()(),"' href='").concat(e,'\' target="_blank" className="break-all" rel="noopener noreferrer">\n               ').concat(e,"\n             </a>"));return t},[]);return(0,a.jsxs)("form",{ref:p,className:"mx-auto flex w-full flex-col items-center justify-center gap-4 pb-2 pt-6 max-sm:px-8 sm:w-[46.25rem] sm:pb-[2rem] sm:pt-[1rem]",onSubmit:t,autoComplete:"off",children:[(0,a.jsxs)("div",{style:{borderColor:d},className:"flex w-full items-center justify-between gap-2 rounded-lg border-[1px] px-6 py-[0.88rem] font-Roboto",children:["inactive"!==h&&"audio"===s?(0,a.jsxs)("div",{className:"flex items-center gap-[1.25rem]",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{f(),g()},children:(0,a.jsx)(L,{className:"h-4 w-4 rounded-full bg-none text-[#FF4D4F] hover:bg-[#FF4D4F] hover:text-white"})}),(0,a.jsx)("p",{className:"text-[1rem] leading-5 text-black/25",children:(0,H.utc)((0,H.duration)(m,"seconds").as("milliseconds")).format("mm:ss")}),(0,a.jsx)("button",{type:"button",onClick:f,children:(0,a.jsx)(E,{className:"h-4 w-4 rounded-full bg-none text-[#52C41A] hover:bg-[#52C41A] hover:text-white"})})]}):(0,a.jsx)(F,{className:"text-[1rem] leading-6",name:"message",placeholder:"text"===s?"Send a message.":"Click the microphone icon to start."}),"inactive"===h&&"audio"===s?(0,a.jsx)("button",{type:"button",onClick:C,children:(0,a.jsx)(M,{className:"h-6 w-6 fill-black/25 text-[white] hover:fill-[#1D39C4]"})}):(0,a.jsx)("button",{type:"button",disabled:"audio"===s&&"recording"===h,onClick:()=>{var e;return null===(e=p.current)||void 0===e?void 0:e.requestSubmit()},children:(0,a.jsx)(T,{className:"h-4 w-4 stroke-black/25 hover:stroke-[#004EA8]"})})]}),(0,a.jsx)("div",{className:"".concat(i?"cursor-pointer":""),onClick:()=>{i&&window.open(i,"_blank")},children:(0,a.jsxs)("div",{className:"mx-auto flex w-fit items-center justify-center gap-1",children:[u&&(0,a.jsx)("p",{dangerouslySetInnerHTML:{__html:w(u)},className:"w-fit font-Roboto text-[0.875rem] leading-[1.25rem] text-[#343541]"}),l&&(0,a.jsx)(v(),{className:"h-[2rem] w-fit object-contain",src:j(l),alt:"Footer Image",width:800,height:500})]})})]})},A=s(5119),V=s(7848),R=e=>{let{query:t,onClick:s}=e;return(0,a.jsx)("div",{className:"dark:bg-gray-600 dark:hover:bg-gray-700 w-full cursor-pointer rounded-lg bg-[#F3F9FE] px-4 py-[1.38rem] hover:bg-[#e2f2ff] sm:px-[2rem]",onClick:()=>s(t),children:(0,a.jsx)("span",{className:"flex items-center justify-center text-center font-Roboto text-[0.875rem] leading-[1.25rem]",children:(0,a.jsx)("p",{className:"",children:'"'.concat(t,'" →')})})})};let{getQuestion:Z}=s(9628);var B=e=>{let{sendHandler:t}=e,s=(0,A.Z)(),{toggleGlobalLoading:n,updateFeedback:l}=(0,o.useContext)(u.l),{token:c}=(0,o.useContext)(r.E_),[d,h]=(0,o.useState)([]),{data:m,error:x,isLoading:C}=(0,V.a)(["sampleQuestions"],()=>(0,i.Vl)({token:c}));if((0,o.useEffect)(()=>{C?n(!0):C||n(!1)},[C]),(0,o.useEffect)(()=>{m?h(m.message):x&&(l({showSnackbar:!0,snackbarMessage:"Failed to fetch API random questions",snackbarType:"error"}),h(Array.from([,,,,,].keys()).map(()=>Z())))},[m,x]),s)return(0,a.jsx)("div",{className:"mx-auto flex h-full min-h-fit flex-col items-center justify-center gap-4 max-sm:px-8 sm:w-[46.25rem]",children:d.map((e,s)=>(0,a.jsx)(R,{query:e,onClick:t},s))})},O=s(3920);let P=e=>{let[t,s]=(0,o.useState)(),[a,r]=(0,o.useState)(!1),{channels:n,path:l,url:c,disabled:i,extraHeaders:u}=e;(0,A.Z)(),(0,o.useEffect)(()=>{i||(t&&(Object.entries(n).forEach(e=>{let[s,a]=e;return t.off(s,a)}),t.off("connect"),t.off("disconnect"),t.off("connect_error"),t.disconnect()),s((0,O.io)(c,{path:l,extraHeaders:u,withCredentials:!0})))},[i]),(0,o.useEffect)(()=>{if(t)return t.on("connect",()=>{r(!0)}),t.on("disconnect",()=>{r(!1)}),t.on("connect_error",()=>{setTimeout(()=>t.connect(),5e3)}),Object.entries(n).forEach(e=>{let[s,a]=e;return t.on(s,a)}),()=>{Object.entries(n).forEach(e=>{let[s,a]=e;return t.off(s,a)}),t.off("connect"),t.off("disconnect"),t.off("connect_error")}},[n,t]);let d=(0,o.useMemo)(()=>t?Object.keys(n).reduce((e,s)=>(e[s]=e=>{t&&t.emit(s,e)},e),{}):void 0,[n,t]);return{isConnected:a,transmitters:d}};var q=()=>{let{chats:e}=(0,o.useContext)(l.p),{inputMode:t}=(0,o.useContext)(c.S),{resetRecording:s,audioFile:i}=(0,o.useContext)(n.H),u=(0,o.useRef)(null),d=(0,o.useCallback)(()=>{s(),setTimeout(()=>{var e,t;return null===(e=u.current)||void 0===e?void 0:e.scrollTo(0,null===(t=u.current)||void 0===t?void 0:t.scrollHeight)},100)},[s]);!function(e){let{chatGptSessionId:t,acceptWS:s,appendTemporaryResponse:a}=(0,o.useContext)(l.p),{socketUrl:n,token:i}=(0,o.useContext)(r.E_),{isLoggedIn:u}=(0,o.useContext)(c.S),d=(0,o.useCallback)(t=>{s&&(a(t),null==e||e())},[s,a]),{isConnected:h}=P({disabled:!u,url:n,path:"",channels:{[t]:d},extraHeaders:{Authorization:"Token ".concat(i)}})}(d);let{sendHandler:h,sendRTHandler:m}=C(d),x=(0,o.useCallback)(e=>{e.preventDefault();let t=new FormData(e.currentTarget),s=t.get("message");m(s),e.currentTarget.reset()},[m]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-full flex-auto overflow-y-auto",children:"text"===t&&0===e.length?(0,a.jsx)(B,{sendHandler:e=>m(e)}):(0,a.jsx)(_,{ref:u,scrollDownHandler:d})}),t&&(0,a.jsx)(D,{submitHandler:x})]})},U=e=>{let{className:t}=e;return(0,a.jsx)("div",{className:"h-1 w-full bg-gray-200 ".concat(t),children:(0,a.jsx)("div",{className:"absolute left-0 top-0 h-full w-1/12 animate-slide bg-gray-400"})})},W=()=>{let{showLinearProgress:e}=(0,o.useContext)(u.l),{headerBgColor:t,headerImgUrl:s}=(0,o.useContext)(r.E_);return(0,a.jsxs)("div",{style:{backgroundColor:t},className:"relative flex items-center justify-center gap-4 py-[1rem] max-sm:px-4 sm:py-[1.87rem]",children:[e&&(0,a.jsx)(U,{className:"absolute left-0 top-0"}),(0,a.jsx)(v(),{src:j(s),loading:"eager",className:"h-[4.0583rem] object-contain",alt:"BDO_logo",height:800,width:1200})]})},X=s(9008),$=s.n(X);function z(){let{favIcon:e}=(0,o.useContext)(r.E_);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)($(),{children:(0,a.jsx)("link",{rel:"icon",type:"image/x-icon",href:e?j(e):"".concat("/assets/xeedchatbot","/images/favicon.ico")})}),(0,a.jsxs)("div",{className:"flex h-full w-full flex-col",children:[(0,a.jsx)(W,{}),(0,a.jsx)(q,{})]})]})}}},function(e){e.O(0,[885,692,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);